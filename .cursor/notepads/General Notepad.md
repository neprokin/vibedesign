Общее назначение продукта

Этот блокнот описывает, как наш продукт автоматизирует работу с дизайном в Figma, извлекает и анализирует данные о макете, а также позволяет редактировать дизайн с помощью AI (LLM) и MCP (Model Context Protocol). Основные задачи:
	1.	Извлечение данных из Figma
	•	Чтение структуры (страницы, фреймы, слои, компоненты) и дизайн-токенов (цвета, шрифты, отступы, тени, градиенты).
	•	Использование Figma REST API только для чтения, с кешированием для оптимизации производительности.
	2.	Механизм редактирования
	•	Изменение стилей, добавление новых компонентов, обновление переменных — всё это выполняется через Figma-плагин с помощью WebSocket.
	•	MCP-сервер (на Python) управляет логикой: определяет, когда и как плагин внёс изменения.
	3.	Интеграция с LLM
	•	Генерация UI-компонентов, подсказки по рефакторингу дизайна, Multi-Choice Prompting (MCP) для нескольких вариантов изменений.
	•	LLM получает структуру проекта или фрагменты данных, затем возвращает идеи по улучшению, оптимизации и т.д.

⸻

Архитектура и ключевые модули

1. MCP-сервер (Python)
	•	FastMCP SDK: обеспечивает быструю регистрацию инструментов (tools) для чтения данных (Figma REST) и записи (через плагин).
	•	Асинхронная обработка: поддерживается для массивных запросов и параллельных операций с LLM.
	•	Формат данных: JSON или Markdown, чтобы AI мог обрабатывать описание макета.

2. Figma-плагин (TypeScript/JavaScript)
	•	WebSocket: принимает команды от MCP-сервера, например, «обновить цвет слоя #FFF на #FF5733».
	•	Plugin API: позволяет создавать и изменять узлы (текст, фигуры), настраивать стили и управлять слоями напрямую в файле Figma.
	•	UI компоненты: Header, Toolbar, Settings, Results

3. LLM (OpenAI или локальная модель)
	•	Генерация и редактирование UI-компонентов
	•	Анализ дизайна и рекомендации
	•	Multi-Choice Prompting для вариантов изменений

4. Cursor IDE
	•	Интерактивный чат для команд
	•	Agent Mode / Ask Mode для пошаговых действий
	•	Notepads для хранения контекста

⸻

Дизайн-токены и стили

Система дизайн-токенов для поддержания единого стиля при генерации UI-компонентов. Подробное описание токенов и их использования доступно в @docs/AI_TOOLS.md.

⸻

Поток команд: От запроса в Cursor к результату в Figma
	1.	Пользователь: вводит команду
	2.	Cursor: распознаёт текст, передаёт MCP-серверу
	3.	MCP-сервер: извлекает данные, обращается к LLM
	4.	Figma-плагин: создаёт/обновляет элементы
	5.	Cursor: отображает результат

Подробное описание рабочих процессов доступно в @docs/WORKFLOW_GUIDE.md.

⸻

Распространённые сценарии и примеры

Подробные примеры использования и сценарии доступны в @docs/PRACTICAL_EXAMPLES.md.

⸻

Лучшие практики

Основные принципы и рекомендации по работе с продуктом доступны в @docs/USER_GUIDE.md.

⸻

Документация проекта

1. План разработки и текущее состояние
	•	@docs/DEVELOPMENT_PLAN.md - детальный план разработки, текущий прогресс и статус компонентов

2. Руководства
	•	@docs/USER_GUIDE.md - руководство пользователя
	•	@docs/WORKFLOW_GUIDE.md - руководство по рабочим процессам
	•	@docs/DEPLOYMENT_GUIDE.md - руководство по развертыванию
	•	@docs/TEST_GUIDE.md - руководство по тестированию

3. Техническая документация
	•	@docs/FIGMA_PLUGIN_DEVELOPMENT.md - разработка Figma-плагина
	•	@docs/AI_INTEGRATION.md - интеграция с AI
	•	@docs/AI_TOOLS.md - AI-инструменты и их использование
	•	@docs/PRACTICAL_EXAMPLES.md - практические примеры

4. Правила Cursor
	•	@rules/rule-1.mdc - основные правила интеграции Figma, Cursor, LLM и MCP
	•	@rules/rule-2.mdc - правила разработки MCP-сервера и Figma-плагина
	•	@rules/rule-3.mdc - правила генерации кода Next.js
	•	@rules/rule-4.mdc - правила разработки UI/UX компонентов

⸻

Внешние ресурсы
	•	Figma API: https://www.figma.com/developers/api
	•	MCP / FastMCP: https://github.com/modelcontextprotocol/python-sdk
	•	Cursor Notepads: https://docs.cursor.com/beta/notepads
	•	shadcn/ui: https://ui.shadcn.com

⸻

Документация в Cursor (@Docs)
	•	@Docs/Cursor Model Context Protocol
	•	@Docs/Model Context Protocol (MCP)
	•	@Docs/MCP Overview
	•	@Docs/Figma REST API
	•	@Docs/Figma Plugin API
	•	@Docs/Figma Code Connect
	•	@Docs/Shards UI Kit
	•	@Docs/Tailwind


Инструкции для LLM Cursor

1. Поддержание актуальности
	•	При каждом изменении в документации (@docs/*) проверять соответствие с этим блокнотом
	•	Обновлять ссылки и краткие описания при изменении структуры документации
	•	Не дублировать детальную информацию из документации, а давать ссылки на соответствующие файлы

2. Согласованность данных
	•	Проверять соответствие между всеми документами
	•	При обновлении дизайн-токенов или архитектуры обновлять все связанные документы
	•	Поддерживать единую терминологию во всех документах

3. Структура блокнота
	•	Сохранять краткость и ясность описаний
	•	Использовать ссылки на документацию вместо дублирования информации
	•	Фокусироваться на общем понимании продукта и его возможностей

4. Обновление документации
	•	При добавлении новых функций или изменении существующих обновлять соответствующие документы
	•	Поддерживать актуальность примеров и сценариев использования
	•	Регулярно проверять работоспособность всех ссылок

5. Взаимодействие с пользователем
	•	При запросах пользователя учитывать контекст из всех документов
	•	Предлагать релевантные ссылки на документацию при необходимости
	•	Поддерживать единый стиль ответов и рекомендаций 

⸻

Механизм обновления блокнота

Важное замечание по обновлению информации:

1. Файл `.cursor/notepads/General Notepad.md` 
	•	Этот файл редактируется AI с помощью инструментов Cursor
	•	Все изменения и обновления сначала вносятся в этот файл
	•	LLM имеет доступ к редактированию этого файла

2. Системный блокнот `@General Notepad`
	•	Этот блокнот является системным блокнотом Cursor
	•	Содержимое переносится вручную из файла General Notepad.md
	•	LLM не имеет прямого доступа к редактированию этого блокнота

3. Процесс обновления
	•	AI редактирует файл General Notepad.md
	•	Пользователь переносит обновления в системный @General Notepad
	•	Оба источника должны содержать идентичную информацию

При обновлении любой части документации необходимо сначала обновить General Notepad.md, а затем скопировать изменения в системный блокнот. 